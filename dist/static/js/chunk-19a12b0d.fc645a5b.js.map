{"version":3,"sources":["webpack:///./src/views/wxMap/index.vue?6fea","webpack:///./src/views/wxMap/index.vue?40a4","webpack:///./src/views/wxMap/index.vue","webpack:///./src/views/wxMap/index.vue?8aeb","webpack:///src/views/wxMap/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","showPopup","model","value","callback","$$v","expression","searchValue","_l","item","index","key","title","goThis","staticRenderFns","component","map","centerAndZoom","enableScrollWheelZoom","addControl","BMap","GeolocationControl","NavigationControl","local","LocalSearch","_this","getStatus","BMAP_STATUS_SUCCESS","i","results","getCurrentNumPois","resultList","s","watch","methods","marker","setAnimation","openInfo","content","geolocation","getCurrentPosition","mk","Marker","r","point","addOverlay","panTo","Point","lng","gc","Geocoder","getLocation","addComp","rs","addressComponents","getmarksList","alert","reg","getLocal","clearOverlays","pointsView","n","p","push","myIcon","Icon","Size","offset","label","Label","setStyle","setLabel","addClickHandler","setViewport","addEventListener","width","height","enableMessage","e","target","getPosition","lat","infoWindow","InfoWindow","openInfoWindow"],"mappings":"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","file":"static/js/chunk-19a12b0d.fc645a5b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map_page\"},[_c('div',{attrs:{\"id\":\"container\"}}),_c('div',{staticClass:\"map_search\"},[_c('van-search',{attrs:{\"background\":\"rgba(0, 0, 0, .1)\",\"placeholder\":\"请输入搜索关键词\",\"disabled\":\"\"},on:{\"click\":function($event){_vm.showPopup=true}}})],1),_c('me-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('van-search',{attrs:{\"background\":\"rgba(0, 0, 0, .1)\",\"placeholder\":\"请输入搜索关键词\"},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}}),_vm._l((_vm.resultList),function(item,index){return _c('me-cell',{key:index,attrs:{\"name\":item.title,\"value\":\"\"},on:{\"click\":function($event){return _vm.goThis(item)}}})})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=00525c86&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=00525c86&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00525c86\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=00525c86&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=00525c86&scoped=scoped&lang=css&\"","<template>\r\n\t<div class=\"map_page\">\r\n\t\t<div id=\"container\"></div>\r\n    <div class=\"map_search\">\r\n\t\t\t<van-search\r\n\t\t    background=\"rgba(0, 0, 0, .1)\"\r\n\t\t    placeholder=\"请输入搜索关键词\"\r\n\t\t    disabled\r\n\t\t    @click=\"showPopup=true\"\r\n\t\t  />\r\n\t\t</div>\r\n\r\n\t\t<me-popup v-model='showPopup' position=\"bottom\">\r\n\t\t\t<van-search\r\n\t\t    background=\"rgba(0, 0, 0, .1)\"\r\n\t\t    placeholder=\"请输入搜索关键词\"\r\n\t\t    v-model=\"searchValue\"\r\n\t\t  />\r\n\t\t  <me-cell :name=\"item.title\" value=\"\" v-for=\"(item, index) in resultList\" :key=\"index\" @click=\"goThis(item)\"></me-cell>\r\n\t\t</me-popup>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tmap: '',\r\n\t\t\tshowPopup: false,\r\n\t\t\tlocal: '',\r\n\t\t\tsearchValue: '',\r\n\t\t\tresultList: []\r\n\t\t}\r\n\t},\r\n\tmounted () {\r\n\t\tthis.map = new BMap.Map(\"container\");          // 创建地图实例     // 初始化地图，设置中心点坐标和地图级别\r\n    this.map.centerAndZoom(\"上海\",13);\r\n    this.map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放\r\n    this.map.addControl(new BMap.GeolocationControl({\r\n    \tanchor: BMAP_ANCHOR_BOTTOM_RIGHT,\r\n    })); // 定位\r\n    this.map.addControl(new BMap.NavigationControl({\r\n    \tanchor: BMAP_ANCHOR_BOTTOM_LEFT,\r\n    \ttype: BMAP_NAVIGATION_CONTROL_LARGE,\r\n    \tenableGeolocation: true\r\n    })); // 缩放\r\n\r\n\t\tlet _this = this\r\n    this.local = new BMap.LocalSearch(this.map, { // 搜索\r\n\t\t\trenderOptions:{map: this.map},\r\n\t\t\tonSearchComplete: function(results){\r\n        if (_this.local.getStatus() == BMAP_STATUS_SUCCESS){\r\n        \tvar s = [];\r\n          for (var i = 0; i < results.getCurrentNumPois(); i ++){\r\n          \ts.push({\r\n          \t\ttitle: results.getPoi(i).title,\r\n          \t\taddress: results.getPoi(i).address,\r\n          \t\tpoint: results.getPoi(i).point,\r\n          \t\tdetailUrl: results.getPoi(i).detailUrl\r\n          \t})\r\n          }\r\n          _this.resultList = s\r\n        }\r\n    \t}\r\n\t\t});\r\n\r\n\t\tif (this.$route.query.inputvalue && this.$route.query.inputvalue != '') {\r\n\t\t\tthis.local.search(this.$route.query.inputvalue);\r\n\t\t\t// 这个地方可调getmarksList方法，获取关键字周围的站点\r\n\t\t} else {\r\n\t\t\tthis.getNowPos() // 获取当前位置\r\n\t\t}\r\n  },\r\n  watch: {\r\n  \tsearchValue () {\r\n  \t\tthis.searchVa()\r\n  \t}\r\n  },\r\n  methods: {\r\n  \tsearchVa () {\r\n  \t\tthis.local.search(this.searchValue);\r\n  \t},\r\n  \tgoThis (detail) {\r\n  \t\tlet _this = this\r\n  \t\tthis.map.clearOverlays(); //清除地图上所有覆盖物\r\n  \t\tthis.showPopup = false\r\n  \t\tthis.map.centerAndZoom(detail.point, 18)\r\n  \t\tvar marker = new BMap.Marker(detail.point)\r\n  \t\tthis.map.addOverlay(marker);    //添加标注\r\n  \t\tmarker.addEventListener(\"click\",function(e){\r\n      \tvar content =\"<p style='font-weight:600'>\"+detail.title+\"</p><p style='line-height: 20px;'>地址：\"+detail.address+\"</p>\";\r\n        marker.setAnimation(null);\r\n        _this.openInfo(content,e);\r\n      });\r\n  \t},\r\n//\tgetSearch() { // 自动加载搜索功能\r\n//\t\tlet _this = this\r\n//\t\tvar ac = new BMap.Autocomplete({\r\n//\t\t\t\t\"input\" : \"mapsearch\",\r\n//\t\t\t\t\"location\" : this.map\r\n//\t\t\t});\r\n//\t\t\tac.addEventListener(\"onhighlight\", function(e) {  //鼠标放在下拉列表上的事件\r\n//\t\t\t\tvar str = \"\";\r\n//\t\t\t\tvar _value = e.fromitem.value;\r\n//\t\t\t\tvar value = \"\";\r\n//\t\t\t\tif (e.fromitem.index > -1) {\r\n//\t\t\t\t\tvalue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;\r\n//\t\t\t\t}\r\n//\t\t\t\tstr = \"FromItem<br />index = \" + e.fromitem.index + \"<br />value = \" + value;\r\n//\r\n//\t\t\t\tvalue = \"\";\r\n//\t\t\t\tif (e.toitem.index > -1) {\r\n//\t\t\t\t\t_value = e.toitem.value;\r\n//\t\t\t\t\tvalue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;\r\n//\t\t\t\t}\r\n//\t\t\t\tstr += \"<br />ToItem<br />index = \" + e.toitem.index + \"<br />value = \" + value;\r\n//\t\t\t\tconsole.log(str)\r\n//\t\t\t\tdocument.getElementById(\"searchResultPanel\").innerHTML = str;\r\n//\t\t\t});\r\n//\r\n//\t\t\tac.addEventListener(\"onconfirm\", function(e) {    //鼠标点击下拉列表后的事件\r\n//\t\t\t\tvar _value = e.item.value;\r\n//\t\t\t\t_this.myValue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;\r\n//\t\t\t\tdocument.getElementById(\"searchResultPanel\").innerHTML =\"onconfirm<br />index = \" + e.item.index + \"<br />myValue = \" + _this.myValue;\r\n//\t\t\t\t_this.setPlace();\r\n//\t\t\t});\r\n//\t},\r\n//\tsetPlace(){\r\n//\t\tlet _this = this\r\n//\t\t\tthis.map.clearOverlays();    //清除地图上所有覆盖物\r\n//\t\t\tfunction myFun(){\r\n//\t\t\t\tvar pp = local.getResults().getPoi(0).point;    //获取第一个智能搜索的结果\r\n//\t\t\t\t_this.map.centerAndZoom(pp, 18);\r\n//\t\t\t\t_this.map.addOverlay(new BMap.Marker(pp));    //添加标注\r\n//\t\t\t}\r\n//\t\t\tvar local = new BMap.LocalSearch(this.map, { //智能搜索\r\n//\t\t\t  onSearchComplete: myFun\r\n//\t\t\t});\r\n//\t\t\tlocal.search(this.myValue);\r\n//\t\t},\r\n\r\n\r\n\r\n  \tgetNowPos () { // 获取当前位置\r\n  \t\tvar _this = this\r\n  \t\tvar geolocation = new BMap.Geolocation();\r\n      geolocation.getCurrentPosition(function(r){\r\n        if(this.getStatus() == BMAP_STATUS_SUCCESS){\r\n          var mk = new BMap.Marker(r.point);\r\n          _this.map.addOverlay(mk);//标出所在地\r\n          _this.map.panTo(r.point);//地图中心移动\r\n          var point = new BMap.Point(r.point.lng,r.point.lat);//用所定位的经纬度查找所在地省市街道等信息\r\n          var gc = new BMap.Geocoder();\r\n          gc.getLocation(point, function(rs){\r\n            var addComp = rs.addressComponents;\r\n            _this.getmarksList(\"province=\"+addComp['province']);\r\n          });\r\n        }else {\r\n          alert('failed'+this.getStatus());\r\n        }\r\n      },{enableHighAccuracy: true})\r\n  \t},\r\n\r\n  \t// 获取站点集合\r\n  \tgetmarksList (urlData) {\r\n  \t\tlet result=[\r\n\t\t    {\r\n\t\t    \t\"id\":\"515\",\r\n\t\t\t    \"province\":\"\\u6e56\\u5317\\u7701\",\r\n\t\t\t    \"area\":\"\\u5b9c\\u660c\",\r\n\t\t\t    \"shopname\":\"\\u77e5\\u6765\\u667a\\u80fd\\u79d1\\u6280\",\r\n\t\t\t    \"shopaddr\":\"\\u6e56\\u5317\\u7701\\u5b9c\\u660c\\u5e02\\u5747\\u7476\\u5e7f\\u573a\\u4e00\\u697c\\u77e5\\u6765\\u667a\\u80fd\\u4f53\\u9a8c\\u9986\",\r\n\t\t\t    \"location\":\"111.31098109196,30.732757818026\"\r\n\t\t    },{\r\n\t\t    \t\"id\":\"516\",\r\n\t\t    \t\"province\":\"\\u6e56\\u5317\\u7701\",\r\n\t\t    \t\"area\":\"\\u6b66\\u6c49\",\r\n\t\t    \t\"shopname\":\"\\u6b66\\u6c49\\u89e3\\u653e\\u5927\\u9053\\u4f18\\u8da3\\u5e97\",\r\n\t\t    \t\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u6b66\\u6c49\\u5e02\\u6c5f\\u6c49\\u533a\\u89e3\\u653e\\u5927\\u9053557\\u53f7\\u4e2d\\u5c71\\u5e7f\\u573a1\\u697c\\u82cf\\u5b81\\u6613\\u8d2d\\u4f18\\u8da3\",\r\n\t\t    \t\"location\":\"114.27613872848,30.587851596764\"\r\n\t\t    },{\"id\":\"517\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u6b66\\u6c49\",\"shopname\":\"\\u6b66\\u6c49\\u5149\\u8c37\\u4f18\\u8da3\\u5e97\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u6b66\\u6c49\\u5e02\\u6d2a\\u5c71\\u533a\\u6c11\\u9662\\u8def\\u5149\\u8c37\\u5e7f\\u573a\\u8d44\\u672c\\u5927\\u53a6\\u8d1f\\u4e00\\u697c\\u82cf\\u5b81\\u6613\\u8d2d\",\"location\":\"114.40624298256,30.510448272271\"},{\"id\":\"518\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u8944\\u9633\",\"shopname\":\"\\u8d35\\u53cb\\u7535\\u5668\\u6709\\u9650\\u516c\\u53f8\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u8944\\u9633\\u5e02\\u6a0a\\u57ce\\u533a\\u6625\\u5143\\u8def8\\u53f7\\u73b0\\u4ee3\\u57ce\\u6570\\u7801\\u6e2f\\u4e00\\u697c1038\\u53f7\",\"location\":\"112.14366834884,32.058976142962\"},{\"id\":\"519\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u5341\\u5830\",\"shopname\":\"\\u9f0e\\u5174\\u6295\\u5f71\\u79d1\\u6280\\u6709\\u9650\\u516c\\u53f8\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u5341\\u5830\\u5e02\\u5f20\\u6e7e\\u533a\\u516d\\u5830\\u6cf0\\u5f18\\u7535\\u8111\\u57ce\\u4e8c\\u697cA\\u533a45\\u53f7\",\"location\":\"110.7906542215,32.661244015944\"},{\"id\":\"520\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u6069\\u65bd\",\"shopname\":\"\\u5dde\\u987a\\u5174\\u8fbe\\u7535\\u8111\\u6709\\u9650\\u516c\\u53f8\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u6069\\u65bd\\u5dde\\u56fd\\u6cf0\\u5927\\u53a62\\u697c\\u987a\\u8fbe\\u7535\\u8111\",\"location\":\"109.4926968993,30.278629959823\"},{\"id\":\"521\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u8346\\u5dde\",\"shopname\":\"\\u767e\\u4fe1\\u7535\\u8111\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u8346\\u5dde\\u5e02\\u6c99\\u5e02\\u533a\\u7ea2\\u95e8\\u8def\\u98de\\u817e\\u6570\\u7801\\u5e7f\\u573a\\u4e8c\\u697c2008\\u53f7\\uff08\\u8346\\u5dde\\u767e\\u4fe1\\u7535\\u8111\\uff09\",\"location\":\"112.26757444672,30.312061976048\"},{\"id\":\"522\",\"province\":\"\\u6e56\\u5317\\u7701\",\"area\":\"\\u76d1\\u5229\",\"shopname\":\"\\u8bba\\u7c73\\u667a\\u6167\\u5c45\\u5bb6\\u751f\\u6d3b\\u9986\",\"shopaddr\":\"\\u6e56\\u5317\\u7701\\u8346\\u5dde\\u5e02\\u76d1\\u5229\\u767e\\u665f\\u5e7f\\u573a\\u4e8c\\u697c296\\u53f7\",\"location\":\"113.0019564425,29.848933249111\"}];\r\n      let reg=eval(result);\r\n      if(reg.length<1){\r\n        return false;\r\n      }\r\n      this.getLocal(reg)\r\n  \t},\r\n\r\n  \tgetLocal(reg){ // 在地图中显示站点\r\n  \t\tlet _this = this\r\n      _this.map.clearOverlays();\r\n      var pointsView = [];\r\n      for(var i=0;i<reg.length;i++){\r\n        var n=i+1;\r\n        var p= reg[i]['location'].split(',');\r\n        var point = new BMap.Point(p[0],p[1]);\r\n        pointsView.push(point);\r\n\r\n        var content =\"<p style='font-weight:600'>\"+reg[i].shopname+\"</p><p style='line-height: 20px;'>地址：\"+reg[i].shopaddr+\"</p>\";\r\n        var myIcon = new BMap.Icon(\"bd1.png\", new BMap.Size(21, 33), {\r\n          offset: new BMap.Size(10, 25), // 指定定位位置\r\n        });\r\n        var  marker = new BMap.Marker(point,{icon:myIcon});        // 创建标注\r\n        var  marker = new BMap.Marker(point);        // 创建标注\r\n        var label = new BMap.Label(n,{\r\n            offset : new BMap.Size(0,3)\r\n        });\r\n        label.setStyle({\r\n            width:'21px',background:'none',color:'#fff',border:'none',textAlign:'center'//只要对label样式进行设置就可达到在标注图标上显示数字的效果\r\n        });\r\n        marker.setLabel(label);//显示地理名称 a\r\n        _this.map.addOverlay(marker);\r\n        _this.addClickHandler(content,marker);\r\n      }\r\n      //让所有点在视野范围内\r\n      _this.map.setViewport(pointsView);\r\n    },\r\n\r\n    addClickHandler(content,marker){ // 点击站点\r\n   \t\tlet _this = this\r\n      marker.addEventListener(\"click\",function(e){\r\n        marker.setAnimation(null);\r\n        _this.openInfo(content,e);\r\n      });\r\n    },\r\n\r\n    openInfo(content,e){ // 弹出marker\r\n    \tvar opts = {\r\n        width : 250,     // 信息窗口宽度\r\n        height: 50,     // 信息窗口高度\r\n        title : \"\" , // 信息窗口标题\r\n        enableMessage:true//设置允许信息窗发送短息\r\n    \t};\r\n      var p = e.target;\r\n      var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);\r\n      var infoWindow = new BMap.InfoWindow(content,opts);  // 创建信息窗口对象\r\n      this.map.openInfoWindow(infoWindow,point); //开启信息窗口\r\n    },\r\n\r\n    //移动到某一坐标点\r\n    to(i,x,y,shopname,shopaddr){\r\n        var allOverlay = map.getOverlays();\r\n        var last=allOverlay.length-1;\r\n        this.map.removeOverlay(allOverlay[last]);\r\n        var point=new BMap.Point(x,y);\r\n        this.map.centerAndZoom(point,15);\r\n        var myIcon = new BMap.Icon(\"bd2.png\", new BMap.Size(21, 33), {\r\n            offset: new BMap.Size(10, 25), // 指定定位位置\r\n        });\r\n        var  marker = new BMap.Marker(point,{icon:myIcon});        // 创建标注\r\n        var n=i+1;\r\n        var label = new BMap.Label(n,{ // 设置定位图标里的数字\r\n            offset : new BMap.Size(0,3)\r\n        });\r\n        label.setStyle({\r\n            width:'21px',background:'none',color:'#fff',border:'none',textAlign:'center'//只要对label样式进行设置就可达到在标注图标上显示数字的效果\r\n        });\r\n        marker.setLabel(label);//显示地理名称 a\r\n        this.map.addOverlay(marker);\r\n        var content =\"<p style='font-weight:600'>\"+shopname+\"</p><p style='line-height: 20px;'>地址：\"+shopaddr+\"</p>\";\r\n        this.addClickHandler(content,marker);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.map_page{\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t#container{\r\n\t\twidth: 100%;\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tz-index: 0;\r\n\t\tbackground-color: rgb(243, 241, 236);\r\n\t\tcolor: rgb(0, 0, 0);\r\n\t\ttext-align:left;\r\n\t}\r\n\t.map_search{\r\n\t\theight: 55px;\r\n\t\twidth: 100%;\r\n\t}\r\n</style>"],"sourceRoot":""}